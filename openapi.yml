openapi: 3.0.3
info:
  title: Easyapp API
  version: 1.0.0
  description: API documentation for easyapp
paths:
  /api/hello/:
    get:
      operationId: api_hello_retrieve
      description: Get a hello world message
      tags:
        - api
      security:
        - cookieAuth: []
        - basicAuth: []
        - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Message'
          description: ''
  /api/auth/register/:
    post:
      operationId: auth_register_create
      description: 'Регистрация нового пользователя по номеру телефона с опциональным реферальным кодом. При регистрации с реферальным кодом всем участникам в цепочке наверх начисляется по одному бесплатному стартовому стеку.'
      tags:
        - auth
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RegistrationRequest'
      responses:
        '201':
          description: Успешная регистрация
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RegistrationResponse'
        '400':
          description: Ошибка валидации данных регистрации
  /api/auth/login/:
    post:
      operationId: auth_login_create
      description: 'Авторизация пользователя по номеру телефона и паролю.'
      tags:
        - auth
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/LoginRequest'
      responses:
        '200':
          description: Успешная авторизация
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LoginResponse'
        '400':
          description: Ошибка валидации данных авторизации
  /api/auth/me/:
    get:
      operationId: auth_me_retrieve
      description: 'Получить профиль текущего авторизованного пользователя.'
      tags:
        - auth
      security:
        - MemberTokenAuth: []
      responses:
        '200':
          description: Профиль пользователя
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Member'
        '401':
          description: Требуется аутентификация
  /api/profile/stats/:
    get:
      operationId: profile_stats_retrieve
      description: 'Получить статистику реферальной программы: количество рефералов, заработанные бонусы и деньги, история начислений и график регистраций.'
      tags:
        - profile
      security:
        - MemberTokenAuth: []
      responses:
        '200':
          description: Статистика профиля
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProfileStats'
        '401':
          description: Требуется аутентификация
  /api/referrals/tree/:
    get:
      operationId: referrals_tree_list
      description: 'Получить дерево рефералов текущего пользователя или указанного пользователя (для админа) с глубиной и количеством потомков.'
      tags:
        - referrals
      security:
        - MemberTokenAuth: []
      parameters:
        - name: member_id
          in: query
          required: false
          description: 'ID пользователя, для которого нужно получить дерево рефералов (доступно только администраторам).'
          schema:
            type: integer
      responses:
        '200':
          description: 'Дерево рефералов'
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/ReferralNode'
        '401':
          description: Требуется аутентификация
        '403':
          description: Доступ запрещён
        '404':
          description: Пользователь не найден
  /api/referrals/rewards/:
    get:
      operationId: referrals_rewards_list
      description: 'Получить список начисленных реферальных вознаграждений и агрегированную сводку для текущего пользователя или указанного пользователя (для админа).'\
      tags:
        - referrals
      security:
        - MemberTokenAuth: []
      parameters:
        - name: member_id
          in: query
          required: false
          description: 'ID пользователя, для которого нужно получить реферальные вознаграждения (доступно только администраторам).'
          schema:
            type: integer
      responses:
        '200':
          description: 'Реферальные вознаграждения и сводка'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ReferralRewardsResponse'
        '401':
          description: Требуется аутентификация
        '403':
          description: Доступ запрещён
        '404':
          description: Пользователь не найден
  /api/admin/members/:
    get:
      operationId: admin_members_list
      summary: 'Админ-панель: Все пользователи'
      description: 'Список всех пользователей (Member) для админ-панели.'
      tags:
        - admin
      security:
        - MemberTokenAuth: []
      responses:
        '200':
          description: Список пользователей
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedAdminMemberList'
        '401':
          description: Требуется аутентификация
    post:
      operationId: admin_members_create
      summary: 'Админ-панель: Создать пользователя'
      description: 'Создание нового пользователя (включая инфлюенсеров и администраторов) через админ-панель.'
      tags:
        - admin
      security:
        - MemberTokenAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AdminMemberCreateRequest'
      responses:
        '201':
          description: Пользователь создан
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AdminMember'
        '400':
          description: Ошибка валидации данных
        '401':
          description: Требуется аутентификация
  /api/admin/members/{id}/:
    get:
      operationId: admin_members_retrieve
      summary: 'Админ-панель: Детали пользователя'
      description: 'Получить подробную информацию о пользователе для админ-панели.'
      tags:
        - admin
      security:
        - MemberTokenAuth: []
      parameters:
        - name: id
          in: path
          required: true
          description: 'ID пользователя.'
          schema:
            type: integer
      responses:
        '200':
          description: Детали пользователя
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AdminMember'
        '401':
          description: Требуется аутентификация
        '404':
          description: Пользователь не найден
    patch:
      operationId: admin_members_partial_update
      summary: 'Админ-панель: Частичное обновление пользователя'
      description: 'Изменение контактных данных и флагов is_influencer / is_admin пользователя.'
      tags:
        - admin
      security:
        - MemberTokenAuth: []
      parameters:
        - name: id
          in: path
          required: true
          description: 'ID пользователя.'
          schema:
            type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AdminMember'
      responses:
        '200':
          description: Пользователь обновлён
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AdminMember'
        '400':
          description: Ошибка валидации данных
        '401':
          description: Требуется аутентификация
        '404':
          description: Пользователь не найден
    put:
      operationId: admin_members_update
      summary: 'Админ-панель: Полное обновление пользователя'
      description: 'Полное обновление информации о пользователе (кроме пароля и реферального кода).'
      tags:
        - admin
      security:
        - MemberTokenAuth: []
      parameters:
        - name: id
          in: path
          required: true
          description: 'ID пользователя.'
          schema:
            type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AdminMember'
      responses:
        '200':
          description: Пользователь обновлён
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AdminMember'
        '400':
          description: Ошибка валидации данных
        '401':
          description: Требуется аутентификация
        '404':
          description: Пользователь не найден
  /api/admin/referrals/:
    get:
      operationId: admin_referrals_list
      summary: 'Админ-панель: Все реферальные события (депозиты)'
      description: 'Список всех реферальных событий (депозитов) с возможностью фильтрации по пользователю, типу (инфлюенсер/обычный) и диапазону дат. Каждое событие отражает конкретный депозит/стек/ребай с полем deposit_amount.'
      tags:
        - admin
      security:
        - MemberTokenAuth: []
      parameters:
        - name: referrer_id
          in: query
          required: false
          description: 'Фильтр по ID пользователя-реферера.'
          schema:
            type: integer
        - name: is_influencer
          in: query
          required: false
          description: 'Фильтр по типу реферера: инфлюенсер (true) или обычный пользователь (false).'
          schema:
            type: boolean
        - name: from_date
          in: query
          required: false
          description: 'Начальная дата диапазона (YYYY-MM-DD) для фильтрации по дате создания.'
          schema:
            type: string
            format: date
        - name: to_date
          in: query
          required: false
          description: 'Конечная дата диапазона (YYYY-MM-DD) для фильтрации по дате создания.'
          schema:
            type: string
            format: date
      responses:
        '200':
          description: Список реферальных событий
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedReferralEventAdminList'
        '401':
          description: Требуется аутентификация
    post:
      operationId: admin_referrals_create
      summary: 'Админ-панель: Создать реферальное событие (депозит)'
      description: 'Создаёт реферальное событие, фиксирующее депозит приведённого игрока (первый визит или последующие пополнения) и автоматически рассчитывает многоуровневые вознаграждения инфлюенсерам в цепочке: 1000 ₽ за первый турнир реферала и 10% со всех его дальнейших депозитов на фишки.'
      tags:
        - admin
      security:
        - MemberTokenAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AdminCreateReferralEventRequest'
      responses:
        '201':
          description: Реферальное событие создано
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ReferralEventAdmin'
        '400':
          description: Ошибка валидации данных
        '401':
          description: Требуется аутентификация
  /api/admin/stats/overview/:
    get:
      operationId: admin_stats_overview_retrieve
      summary: 'Админ-панель: Общая статистика'
      description: 'Общая статистика для админ-панели: Регистрации по дням, Топ рефереров, Доход по источникам.'
      tags:
        - admin
      security:
        - MemberTokenAuth: []
      responses:
        '200':
          description: Общая статистика для админ-панели
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AdminStatsOverview'
        '401':
          description: Требуется аутентификация
components:
  schemas:
    Message:
      type: object
      properties:
        message:
          type: string
          maxLength: 200
        timestamp:
          type: string
          format: date-time
          readOnly: true
      required:
        - message
        - timestamp
    MemberReferrer:
      type: object
      description: 'Краткая информация о реферере.'
      properties:
        id:
          type: integer
          description: 'Идентификатор пользователя.'
        first_name:
          type: string
          description: 'Имя пользователя.'
        last_name:
          type: string
          description: 'Фамилия пользователя.'
        phone:
          type: string
          description: 'Номер телефона пользователя.'
        referral_code:
          type: string
          description: 'Реферальный код пользователя.'
      required:
        - id
        - first_name
        - last_name
        - phone
        - referral_code
    Member:
      type: object
      description: 'Пользователь сервиса (Member).'
      properties:
        id:
          type: integer
          description: 'Идентификатор пользователя.'
        first_name:
          type: string
          description: 'Имя пользователя.'
        last_name:
          type: string
          description: 'Фамилия пользователя.'
        phone:
          type: string
          description: 'Номер телефона, используемый для входа.'
        email:
          type: string
          format: email
          nullable: true
          description: 'Электронная почта пользователя.'
        is_influencer:
          type: boolean
          description: 'Является ли пользователь инфлюенсером.'
        is_admin:
          type: boolean
          description: 'Является ли пользователь администратором.'
        referral_code:
          type: string
          description: 'Уникальный реферальный код пользователя.'
        referred_by:
          allOf:
            - $ref: '#/components/schemas/MemberReferrer'
          nullable: true
          description: 'Пользователь, который привёл данного участника.'
        created_at:
          type: string
          format: date-time
          description: 'Дата и время регистрации пользователя.'
      required:
        - id
        - first_name
        - last_name
        - phone
        - is_influencer
        - is_admin
        - referral_code
        - created_at
    RegistrationRequest:
      type: object
      description: 'Данные для регистрации нового пользователя.'
      properties:
        first_name:
          type: string
          description: 'Имя.'
        last_name:
          type: string
          description: 'Фамилия.'
        phone:
          type: string
          description: 'Номер телефона, который будет использоваться для входа.'
        email:
          type: string
          format: email
          nullable: true
          description: 'Электронная почта (необязательно).'
        password:
          type: string
          format: password
          description: 'Пароль (минимум 6 символов).'
        referral_code:
          type: string
          nullable: true
          description: 'Реферальный код пригласившего пользователя (необязательно).'
      required:
        - first_name
        - last_name
        - phone
        - password
    RegistrationResponse:
      type: object
      description: 'Ответ при успешной регистрации.'
      properties:
        member:
          $ref: '#/components/schemas/Member'
        token:
          type: string
          description: 'Токен аутентификации пользователя (используется в заголовке Authorization: Token <ключ>).'
      required:
        - member
        - token
    LoginRequest:
      type: object
      description: 'Данные для авторизации пользователя.'
      properties:
        phone:
          type: string
          description: 'Номер телефона.'
        password:
          type: string
          format: password
          description: 'Пароль.'
      required:
        - phone
        - password
    LoginResponse:
      type: object
      description: 'Ответ при успешной авторизации.'
      properties:
        member:
          $ref: '#/components/schemas/Member'
        token:
          type: string
          description: 'Токен аутентификации пользователя (используется в заголовке Authorization: Token <ключ>).'
      required:
        - member
        - token
    ReferralHistoryItem:
      type: object
      description: 'Элемент истории начислений по реферальной программе.'
      properties:
        date:
          type: string
          format: date
          description: 'Дата регистрации реферала.'
        referred_name:
          type: string
          description: 'Имя и фамилия приглашённого пользователя.'
        bonus_amount:
          type: integer
          description: 'Количество бесплатных стеков (бонусных стеков по 1000 ₽), начисленных за реферала. Хранится как целое число стеков.'
        money_amount:
          type: integer
          description: 'Сумма денег в рублях, начисленная инфлюенсеру.'
      required:
        - date
        - referred_name
        - bonus_amount
        - money_amount
    RegistrationsChartPoint:
      type: object
      description: 'Точка на графике регистраций по дням.'
      properties:
        date:
          type: string
          format: date
          description: 'Дата (YYYY-MM-DD).'
        count:
          type: integer
          description: 'Количество регистраций по реферальной ссылке в этот день.'
      required:
        - date
        - count
    ProfileStats:
      type: object
      description: 'Статистика реферальной программы для профиля пользователя.'
      properties:
        total_referrals:
          type: integer
          description: 'Общее количество рефералов.'
        active_referrals:
          type: integer
          description: 'Активные рефералы за последние 30 дней.'
        total_bonus_points:
          type: integer
          description: 'Общее количество бесплатных стеков, заработанных за рефералов (bonus_amount), где 1 стек соответствует стартовому бай-ину примерно 1000 ₽.'
        total_money_earned:
          type: integer
          description: 'Общая сумма заработанных денег в рублях.'
        history:
          type: array
          description: 'История начислений по реферальной программе.'
          items:
            $ref: '#/components/schemas/ReferralHistoryItem'
        registrations_chart:
          type: array
          description: 'График регистраций по дням (количество рефералов в разрезе дат).'
          items:
            $ref: '#/components/schemas/RegistrationsChartPoint'
      required:
        - total_referrals
        - active_referrals
        - total_bonus_points
        - total_money_earned
        - history
        - registrations_chart
    ReferralNode:
      type: object
      description: 'Узел дерева рефералов.'
      properties:
        id:
          type: integer
          description: 'ID участника.'
        username:
          type: string
          description: 'Идентификатор участника (например, номер телефона).'
        is_influencer:
          type: boolean
          description: 'Флаг, указывающий, является ли участник инфлюенсером.'
        depth:
          type: integer
          description: 'Глубина в дереве относительно корневого пользователя (1 — прямой реферал).'
        direct_referrals_count:
          type: integer
          description: 'Количество прямых рефералов этого участника.'
        total_descendants_count:
          type: integer
          description: 'Общее количество потомков (рефералов на всех уровнях) этого участника.'
      required:
        - id
        - username
        - is_influencer
        - depth
        - direct_referrals_count
        - total_descendants_count
    ReferralReward:
      type: object
      description: 'Запись о начисленном реферальном вознаграждении.'
      properties:
        id:
          type: integer
          description: 'Идентификатор вознаграждения.'
        reward_type:
          type: string
          description: 'Тип вознаграждения (PLAYER_STACK, INFLUENCER_FIRST_TOURNAMENT, INFLUENCER_DEPOSIT_PERCENT).'
        amount_rub:
          type: string
          format: decimal
          description: 'Сумма денежного вознаграждения в рублях (для инфлюенсеров).'
        stack_count:
          type: integer
          description: 'Количество бесплатных стартовых стеков, начисленных игроку.'
        depth:
          type: integer
          description: 'Глубина, на которой находится приглашённый игрок относительно получателя вознаграждения.'
        created_at:
          type: string
          format: date-time
          description: 'Дата и время начисления вознаграждения.'
        source_member:
          type: integer
          description: 'ID игрока, чьё действие (регистрация/турнир/депозит) сгенерировало это вознаграждение.'
        source_member_name:
          type: string
          description: 'Краткое имя или идентификатор источника вознаграждения (например, номер телефона).'
      required:
        - id
        - reward_type
        - amount_rub
        - stack_count
        - depth
        - created_at
        - source_member
        - source_member_name
    ReferralRewardsSummary:
      type: object
      description: 'Сводные данные по реферальным вознаграждениям.'
      properties:
        total_stack_count:
          type: integer
          description: 'Общее количество бесплатных стартовых стеков, начисленных пользователю.'
        total_influencer_amount:
          type: string
          format: decimal
          description: 'Общая сумма денежных вознаграждений инфлюенсеру в рублях.'
        total_first_tournament_amount:
          type: string
          format: decimal
          description: 'Суммарные выплаты за первые турниры всех рефералов.'
        total_deposit_percent_amount:
          type: string
          format: decimal
          description: 'Суммарные выплаты, рассчитанные как процент от депозитов рефералов.'
      required:
        - total_stack_count
        - total_influencer_amount
        - total_first_tournament_amount
        - total_deposit_percent_amount
    ReferralRewardsResponse:
      type: object
      description: 'Ответ с детализацией реферальных вознаграждений и агрегированной сводкой.'
      properties:
        rewards:
          type: array
          items:
            $ref: '#/components/schemas/ReferralReward'
        summary:
          $ref: '#/components/schemas/ReferralRewardsSummary'
      required:
        - rewards
        - summary
    AdminMember:
      type: object
      description: 'Пользователь для отображения и управления в админ-панели.'
      properties:
        id:
          type: integer
          description: 'Идентификатор пользователя.'
          readOnly: true
        first_name:
          type: string
          description: 'Имя пользователя.'
        last_name:
          type: string
          description: 'Фамилия пользователя.'
        phone:
          type: string
          description: 'Номер телефона пользователя.'
        email:
          type: string
          format: email
          nullable: true
          description: 'Электронная почта пользователя.'
        is_influencer:
          type: boolean
          description: 'Является ли пользователь инфлюенсером.'
        is_admin:
          type: boolean
          description: 'Является ли пользователь администратором.'
        referral_code:
          type: string
          description: 'Уникальный реферальный код пользователя.'
          readOnly: true
        referred_by:
          allOf:
            - $ref: '#/components/schemas/MemberReferrer'
          nullable: true
          description: 'Пользователь, который привёл данного участника.'
          readOnly: true
        created_at:
          type: string
          format: date-time
          description: 'Дата и время регистрации пользователя.'
          readOnly: true
        total_referrals:
          type: integer
          description: 'Общее количество рефералов (агрегировано по ReferralEvent).'
          readOnly: true
        total_bonus_points:
          type: integer
          description: 'Общее количество бесплатных стеков (bonus_amount), начисленных за рефералов (агрегировано по ReferralReward и Member.total_bonus_points).'
          readOnly: true
        total_money_earned:
          type: integer
          description: 'Общая сумма заработанных денег в рублях (агрегировано по ReferralReward и Member.total_money_earned).'
          readOnly: true
      required:
        - id
        - first_name
        - last_name
        - phone
        - is_influencer
        - is_admin
        - referral_code
        - created_at
        - total_referrals
        - total_bonus_points
        - total_money_earned
    AdminMemberCreateRequest:
      type: object
      description: 'Данные для создания пользователя через админ-панель.'
      properties:
        first_name:
          type: string
          description: 'Имя пользователя.'
        last_name:
          type: string
          description: 'Фамилия пользователя.'
        phone:
          type: string
          description: 'Номер телефона пользователя.'
        email:
          type: string
          format: email
          nullable: true
          description: 'Электронная почта пользователя.'
        password:
          type: string
          format: password
          description: 'Пароль (минимум 6 символов).'
        is_influencer:
          type: boolean
          description: 'Отметка, что пользователь является инфлюенсером.'
        is_admin:
          type: boolean
          description: 'Отметка, что пользователь является администратором.'
      required:
        - first_name
        - last_name
        - phone
        - password
    AdminCreateReferralEventRequest:
      type: object
      description: 'Данные для создания реферального события (депозита) через админ-панель.'
      properties:
        referred_id:
          type: integer
          description: 'ID приглашённого игрока.'
        deposit_amount:
          type: integer
          description: 'Сумма депозита (стоимость стека/пополнения) в рублях.'
        created_at:
          type: string
          format: date-time
          nullable: true
          description: 'Дата и время события. Если не указано, используется текущее время.'
      required:
        - referred_id
        - deposit_amount
    ReferralEventAdmin:
      type: object
      description: 'Реферальное событие для отображения в админ-панели.'
      properties:
        id:
          type: integer
          description: 'Идентификатор реферального события.'
        referrer:
          type: object
          description: 'Реферер (пригласивший пользователь).'
          properties:
            id:
              type: integer
            first_name:
              type: string
            last_name:
              type: string
            is_influencer:
              type: boolean
          required:
            - id
            - first_name
            - last_name
            - is_influencer
        referred:
          type: object
          description: 'Привлечённый пользователь.'
          properties:
            id:
              type: integer
            first_name:
              type: string
            last_name:
              type: string
          required:
            - id
            - first_name
            - last_name
        bonus_amount:
          type: integer
          description: 'Количество бесплатных стеков (bonus_amount), начисленных за реферала по данному событию (для обратной совместимости, может быть 0 при использовании многоуровневой схемы).'
        money_amount:
          type: integer
          description: 'Сумма денег в рублях, начисленная инфлюенсеру за это реферальное событие (для обратной совместимости, может быть 0 при использовании многоуровневой схемы).'
        deposit_amount:
          type: integer
          description: 'Сумма депозита в рублях за конкретное посещение / покупку фишек (один стартовый стек или ребай). Обычно стоимость одного стека составляет около 1000 ₽, но поле хранит произвольную сумму депозита.'
        created_at:
          type: string
          format: date-time
          description: 'Дата и время создания реферального события.'
        referrer_is_influencer:
          type: boolean
          description: 'Флаг, указывающий, является ли реферер инфлюенсером.'
      required:
        - id
        - referrer
        - referred
        - bonus_amount
        - money_amount
        - deposit_amount
        - created_at
        - referrer_is_influencer
    AdminStatsRegistrationsByDayItem:
      type: object
      description: 'Количество регистраций по дням для админ-панели.'
      properties:
        date:
          type: string
          format: date
          description: 'Дата (YYYY-MM-DD).'
        count:
          type: integer
          description: 'Количество регистраций в эту дату.'
      required:
        - date
        - count
    AdminStatsTopReferrerItem:
      type: object
      description: 'Элемент списка «Топ рефереров» для админ-панели.'
      properties:
        id:
          type: integer
          description: 'ID пользователя-реферера.'
        first_name:
          type: string
          description: 'Имя реферера.'
        last_name:
          type: string
          description: 'Фамилия реферера.'
        is_influencer:
          type: boolean
          description: 'Является ли реферер инфлюенсером.'
        total_referrals:
          type: integer
          description: 'Общее количество привлечённых рефералов.'
        total_bonus_points:
          type: integer
          description: 'Суммарные бесплатные стеки (bonus_amount), начисленные за рефералов.'
        total_money_earned:
          type: integer
          description: 'Суммарный заработок в рублях, полученный за рефералов.'
      required:
        - id
        - first_name
        - last_name
        - is_influencer
        - total_referrals
        - total_bonus_points
        - total_money_earned
    AdminStatsIncomeBySource:
      type: object
      description: 'Доход по источникам для админ-панели.'
      properties:
        total_income:
          type: integer
          description: 'Общий доход, рассчитанный на основе суммарных депозитов (deposit_amount) по реферальным событиям. Типичная стоимость одного стека — около 1000 ₽, но поле хранит произвольные суммы депозитов.'
        income_from_influencers:
          type: integer
          description: 'Доход от клиентов, привлечённых инфлюенсерами, рассчитанный по сумме их депозитов (deposit_amount). Типичная стоимость одного стека — около 1000 ₽, но поле хранит произвольные суммы депозитов.'
        income_from_regular_users:
          type: integer
          description: 'Доход от клиентов, привлечённых обычными пользователями, рассчитанный по суммарным депозитам (deposit_amount) за их посещения.'
      required:
        - total_income
        - income_from_influencers
        - income_from_regular_users
    AdminStatsOverview:
      type: object
      description: 'Общая статистика для админ-панели: Регистрации по дням, Топ рефереров, Доход по источникам.'
      properties:
        registrations_by_day:
          type: array
          description: 'Регистрации по дням.'
          items:
            $ref: '#/components/schemas/AdminStatsRegistrationsByDayItem'
        top_referrers:
          type: array
          description: 'Топ рефереров по количеству привлечённых клиентов.'
          items:
            $ref: '#/components/schemas/AdminStatsTopReferrerItem'
        income_by_source:
          $ref: '#/components/schemas/AdminStatsIncomeBySource'
      required:
        - registrations_by_day
        - top_referrers
        - income_by_source
    PaginatedAdminMemberList:
      type: object
      description: 'Страница списка пользователей для админ-панели.'
      properties:
        count:
          type: integer
        next:
          type: string
          format: uri
          nullable: true
        previous:
          type: string
          format: uri
          nullable: true
        results:
          type: array
          items:
            $ref: '#/components/schemas/AdminMember'
      required:
        - count
        - results
    PaginatedReferralEventAdminList:
      type: object
      description: 'Страница списка реферальных событий для админ-панели.'
      properties:
        count:
          type: integer
        next:
          type: string
          format: uri
          nullable: true
        previous:
          type: string
          format: uri
          nullable: true
        results:
          type: array
          items:
            $ref: '#/components/schemas/ReferralEventAdmin'
      required:
        - count
        - results
  securitySchemes:
    basicAuth:
      type: http
      scheme: basic
    cookieAuth:
      type: apiKey
      in: cookie
      name: sessionid
    MemberTokenAuth:
      type: apiKey
      in: header
      name: Authorization
      description: 'Используйте формат: `Token <ключ>` для аутентификации пользователя.'
